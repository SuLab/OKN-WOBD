# CONCEPTUAL QUERY: GeneLab → Publication → GEO → NDE Connection
#
# This query represents the DESIRED connection path but is NOT currently
# executable because the required links are not in the FRINK KGs.
#
# Real-world connection path example:
#   GeneLab OSD-690 → PubMed 37626149 → GEO GSE240654 → NDE
#
# Source URLs:
#   - GeneLab: https://osdr.nasa.gov/bio/repo/data/studies/OSD-690
#   - PubMed:  https://pubmed.ncbi.nlm.nih.gov/37626149/
#   - GEO:     https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE240654
#   - NDE:    https://data.niaid.nih.gov/resources?id=gse240654
#
# MISSING DATA IN CURRENT KGs:
#   1. GeneLab studies lack publication links (PMID/DOI)
#   2. NDE KG doesn't include GEO datasets (only ImmPort, Vivli, etc.)
#   3. No publication-to-dataset linkage exists
#
# If this data were added, the query would look like:

PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX schema: <http://schema.org/>
PREFIX biolink: <https://w3id.org/biolink/vocab/>
PREFIX genelab: <https://purl.org/okn/frink/kg/spoke-genelab/schema/>
PREFIX dcterms: <http://purl.org/dc/terms/>

# HYPOTHETICAL QUERY - Would require data enrichment
SELECT ?genelab_study ?genelab_title ?pmid ?geo_id ?nde_dataset ?nde_name
WHERE {
  # GeneLab study with publication link (NOT CURRENTLY AVAILABLE)
  ?genelab_study rdf:type biolink:Study .
  ?genelab_study genelab:project_title ?genelab_title .
  ?genelab_study dcterms:references ?publication .  # MISSING

  # Publication with PMID (NOT CURRENTLY AVAILABLE)
  ?publication schema:pmid ?pmid .  # MISSING
  ?publication schema:isBasedOn ?geo_dataset .  # MISSING

  # GEO dataset identifier
  ?geo_dataset schema:identifier ?geo_id .  # MISSING
  FILTER(STRSTARTS(?geo_id, "GSE"))

  # NDE dataset linked to same GEO ID (NOT CURRENTLY AVAILABLE)
  ?nde_dataset rdf:type schema:Dataset .
  ?nde_dataset schema:identifier ?geo_id .  # MISSING - NDE doesn't have GEO
  ?nde_dataset schema:name ?nde_name .
}
LIMIT 100

# TO ENABLE THIS CONNECTION:
#
# Option 1: Enrich GeneLab KG
#   - Add publication links (PMID) to Study nodes
#   - Add GEO accession numbers to studies/assays
#
# Option 2: Enrich NDE KG
#   - Index GEO datasets in NDE
#   - Add publication citations with PMIDs
#
# Option 3: Use external APIs
#   - Query OSDR API for publication links
#   - Query NCBI E-utilities for GEO-publication mappings
#   - Query NDE Discovery Portal API for GEO datasets
