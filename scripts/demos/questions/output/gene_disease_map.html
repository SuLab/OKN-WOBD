<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What diseases is SFRP2 connected to, and through what mechanisms?</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f8f9fa;
            color: #2c3e50;
            line-height: 1.6;
            padding: 0 20px 40px;
            max-width: 1100px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            padding: 40px 0 20px;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 30px;
        }
        header h1 {
            font-size: 1.6em;
            color: #2c3e50;
            font-style: italic;
            font-weight: 500;
            margin-bottom: 12px;
        }
        .badge {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        .step {
            background: white;
            border-radius: 8px;
            padding: 20px 24px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .step-header {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }
        .step-number {
            background: #3498db;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
        }
        .step-title {
            font-weight: 600;
            font-size: 1.05em;
        }
        .step-toggle {
            margin-left: auto;
            color: #aaa;
            font-size: 1.2em;
            transition: transform 0.2s;
        }
        .step-toggle.collapsed { transform: rotate(-90deg); }
        .step-body {
            margin-top: 14px;
            padding-left: 40px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .step-body.collapsed { max-height: 0; margin-top: 0; }
        .step-body table {
            border-collapse: collapse;
            width: 100%;
            margin: 10px 0;
        }
        .step-body th, .step-body td {
            padding: 6px 12px;
            border: 1px solid #e9ecef;
            text-align: left;
            font-size: 0.9em;
        }
        .step-body th { background: #f8f9fa; font-weight: 600; }
        .viz-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .viz-section h3 { margin-bottom: 14px; }
        .answer-section {
            background: #eaf7ed;
            border-left: 4px solid #27ae60;
            border-radius: 0 8px 8px 0;
            padding: 20px 24px;
            margin: 24px 0;
        }
        .answer-section h2 {
            color: #27ae60;
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        .provenance {
            background: white;
            border-radius: 8px;
            padding: 16px 24px;
            margin-top: 24px;
            font-size: 0.85em;
            color: #666;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .provenance h3 {
            font-size: 0.95em;
            color: #888;
            margin-bottom: 8px;
            cursor: pointer;
        }
        .provenance-body { display: none; }
        .provenance-body.expanded { display: block; }
        .provenance dt { font-weight: 600; margin-top: 6px; }
        .provenance dd { margin-left: 16px; word-break: break-all; }
        code { background: #f0f0f0; padding: 1px 5px; border-radius: 3px; font-size: 0.9em; }
        .no-data { color: #999; font-style: italic; }
        .query-block { margin: 10px 0; }
        .query-block summary { cursor: pointer; font-weight: 600; font-size: 0.9em; color: #555; }
        .query-block pre {
            background: #1e1e2e; color: #cdd6f4; padding: 12px 16px;
            border-radius: 6px; overflow-x: auto; font-size: 0.82em;
            line-height: 1.5; margin-top: 6px;
        }
        .query-endpoint { font-size: 0.8em; color: #888; margin-left: 8px; font-weight: normal; }
    </style>
</head>
<body>
    <header>
        <h1>"What diseases is SFRP2 connected to, and through what mechanisms?"</h1>
        <div><span class="badge">SPOKE-OKN</span> <span class="badge">Wikidata</span> <span class="badge">Ubergraph</span></div>
    </header>

    
    <div class="step">
        <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-title">Query knowledge graphs for gene-disease connections</div>
            <div class="step-toggle">&#9660;</div>
        </div>
        <div class="step-body">
            <p><strong>Total connections:</strong> 24</p><p><strong>Unique diseases:</strong> 11</p><table><thead><tr><th>Source</th><th>Connections</th><th>Path Types</th></tr></thead><tbody><tr><td>SPOKE-OKN</td><td>2</td><td>expressed_in, negative_marker</td></tr><tr><td>Ubergraph</td><td>1</td><td>go_pathway</td></tr><tr><td>SPOKE+Wikidata</td><td>21</td><td>shared_pathway</td></tr></tbody></table>
        </div>
    </div>

    <div class="step">
        <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-title">Categorize connection mechanisms</div>
            <div class="step-toggle">&#9660;</div>
        </div>
        <div class="step-body">
            <table><thead><tr><th>Mechanism</th><th>Count</th><th>Sample Diseases</th></tr></thead><tbody><tr><td>Shared Pathway</td><td>21</td><td>cervical cancer, colorectal cancer, kidney cancer, liver cancer, lung cancer</td></tr><tr><td>Negative Marker</td><td>1</td><td>kidney cancer</td></tr><tr><td>Expressed In</td><td>1</td><td>pancreatic cancer</td></tr><tr><td>Go Pathway</td><td>1</td><td>cartilage development disorder</td></tr></tbody></table>
        </div>
    </div>

    <div class="step">
        <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title">Rank diseases by evidence breadth</div>
            <div class="step-toggle">&#9660;</div>
        </div>
        <div class="step-body">
            <table><thead><tr><th>Disease</th><th>Sources</th><th>Mechanisms</th></tr></thead><tbody><tr><td>kidney cancer</td><td>SPOKE+Wikidata, SPOKE-OKN</td><td>negative_marker, shared_pathway</td></tr><tr><td>pancreatic cancer</td><td>SPOKE+Wikidata, SPOKE-OKN</td><td>expressed_in, shared_pathway</td></tr><tr><td>cartilage development disorder</td><td>Ubergraph</td><td>go_pathway</td></tr><tr><td>liver cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr><tr><td>cervical cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr><tr><td>testicular cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr><tr><td>thyroid cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr><tr><td>prostate cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr><tr><td>stomach cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr><tr><td>colorectal cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr><tr><td>lung cancer</td><td>SPOKE+Wikidata</td><td>shared_pathway</td></tr></tbody></table>
        </div>
    </div>
    
    <div class="viz-section">
        <h3>SFRP2 Disease Network</h3>
        <!DOCTYPE html>
<html>
<head>
    <title>SFRP2 Disease Connections</title>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .legend {
            text-align: center;
            margin-bottom: 15px;
            font-size: 14px;
            color: #555;
        }
        .instructions {
            text-align: center;
            font-size: 12px;
            color: #888;
            margin-bottom: 10px;
        }
        #network {
            width: 1000px;
            height: 700px;
            border: 1px solid #ddd;
            background: white;
            margin: 0 auto;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .summary {
            text-align: center;
            margin-top: 15px;
            font-size: 13px;
            color: #666;
        }
        .controls {
            text-align: center;
            margin-bottom: 15px;
        }
        .toggle-btn {
            padding: 8px 16px;
            font-size: 13px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
            transition: all 0.2s;
        }
        .toggle-btn.active {
            background: #27ae60;
            color: white;
        }
        .toggle-btn.inactive {
            background: #e0e0e0;
            color: #555;
        }
        .toggle-btn:hover {
            opacity: 0.85;
        }
        #custom-tooltip {
            position: fixed;
            background: rgba(45, 52, 54, 0.95);
            color: white;
            padding: 10px 14px;
            border-radius: 6px;
            font-size: 13px;
            line-height: 1.5;
            max-width: 400px;
            pointer-events: none;
            z-index: 10000;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        #custom-tooltip b {
            color: #f1c40f;
        }
        /* Hide native vis.js tooltip */
        .vis-tooltip {
            display: none !important;
        }
    </style>
</head>
<body>
    <h1>SFRP2 Disease Connections</h1>
    <div class="legend"><div style="margin-bottom:5px;"><b>Nodes:</b> <span style="display:inline-block;margin-right:15px;"><span style="display:inline-block;width:12px;height:12px;background:#3498db;border-radius:50%;margin-right:5px;"></span>Gene</span> <span style="display:inline-block;margin-right:15px;"><span style="display:inline-block;width:12px;height:12px;background:#e74c3c;border-radius:50%;margin-right:5px;"></span>Disease</span> <span style="display:inline-block;margin-right:15px;"><span style="display:inline-block;width:12px;height:12px;background:#2ecc71;border-radius:50%;margin-right:5px;"></span>GO Term</span> <span style="display:inline-block;margin-right:15px;"><span style="display:inline-block;width:12px;height:12px;background:#9b59b6;border-radius:50%;margin-right:5px;"></span>Drug</span></div><div><b>Sources:</b> <span style="display:inline-block;margin-right:15px;"><span style="display:inline-block;width:20px;height:3px;background:#d62728;margin-right:5px;vertical-align:middle;"></span>GXA</span> <span style="display:inline-block;margin-right:15px;"><span style="display:inline-block;width:20px;height:3px;background:#1f77b4;margin-right:5px;vertical-align:middle;"></span>SPOKE-OKN</span> <span style="display:inline-block;margin-right:15px;"><span style="display:inline-block;width:20px;height:3px;background:#2ca02c;margin-right:5px;vertical-align:middle;"></span>Ubergraph</span></div></div>
    <div class="controls">
        <button id="physicsToggle" class="toggle-btn inactive" onclick="togglePhysics()">
            âš¡ Auto-Layout: OFF
        </button>
        <button class="toggle-btn inactive" onclick="resetLayout()">
            ðŸ”„ Reset Layout
        </button>
    </div>
    <div class="instructions">Drag nodes to rearrange â€¢ Scroll to zoom â€¢ Hover for details</div>
    <div id="network"></div>
    <div id="custom-tooltip"></div>
    <div class="summary">
        30 nodes â€¢ 46 connections
    </div>

    <script type="text/javascript">
        var nodes = new vis.DataSet([{"id": "gene:SFRP2", "label": "SFRP2", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 40, "font": {"size": 14, "color": "#2c3e50", "bold": true}, "title": "Gene: SFRP2", "shape": "dot", "fixed": {"x": false, "y": false}, "physics": false}, {"id": "disease:DOID_263", "label": "kidney cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: kidney cancer\nID: DOID_263", "shape": "dot"}, {"id": "disease:DOID_1793", "label": "pancreatic cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: pancreatic cancer\nID: DOID_1793", "shape": "dot"}, {"id": "disease:MONDO_0020779", "label": "cartilage developm...", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: cartilage development disorder\nID: MONDO_0020779", "shape": "dot"}, {"id": "go:0051216", "label": "GO:0051216", "color": {"background": "#2ecc71", "border": "#2ecc71", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "GO:0051216: cartilage development", "shape": "dot"}, {"id": "gene:UTRN", "label": "UTRN", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "UTRN (shares: GO:0005178)", "shape": "dot"}, {"id": "disease:DOID_3571", "label": "liver cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: liver cancer\nID: DOID_3571", "shape": "dot"}, {"id": "gene:ECM2", "label": "ECM2", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "ECM2 (shares: GO:0005178)", "shape": "dot"}, {"id": "gene:WNT4", "label": "WNT4", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "WNT4 (shares: GO:0031012)", "shape": "dot"}, {"id": "disease:DOID_4362", "label": "cervical cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: cervical cancer\nID: DOID_4362", "shape": "dot"}, {"id": "gene:S100A9", "label": "S100A9", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "S100A9 (shares: GO:0031012)", "shape": "dot"}, {"id": "disease:DOID_2998", "label": "testicular cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: testicular cancer\nID: DOID_2998", "shape": "dot"}, {"id": "gene:COL22A1", "label": "COL22A1", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "COL22A1 (shares: GO:0031012)", "shape": "dot"}, {"id": "disease:DOID_1781", "label": "thyroid cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: thyroid cancer\nID: DOID_1781", "shape": "dot"}, {"id": "gene:COL8A1", "label": "COL8A1", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "COL8A1 (shares: GO:0031012)", "shape": "dot"}, {"id": "gene:IL1RL1", "label": "IL1RL1", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "IL1RL1 (shares: GO:0031012)", "shape": "dot"}, {"id": "gene:FLRT3", "label": "FLRT3", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "FLRT3 (shares: GO:0031012)", "shape": "dot"}, {"id": "gene:RELN", "label": "RELN", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "RELN (shares: GO:0031012)", "shape": "dot"}, {"id": "gene:ALPL", "label": "ALPL", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "ALPL (shares: GO:0031012)", "shape": "dot"}, {"id": "gene:COL23A1", "label": "COL23A1", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "COL23A1 (shares: GO:0031012)", "shape": "dot"}, {"id": "gene:GFOD2", "label": "GFOD2", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "GFOD2 (shares: GO:0031012)", "shape": "dot"}, {"id": "gene:COL6A6", "label": "COL6A6", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "COL6A6 (shares: GO:0031012)", "shape": "dot"}, {"id": "disease:DOID_10283", "label": "prostate cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: prostate cancer\nID: DOID_10283", "shape": "dot"}, {"id": "gene:COL9A2", "label": "COL9A2", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "COL9A2 (shares: GO:0031012)", "shape": "dot"}, {"id": "disease:DOID_10534", "label": "stomach cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: stomach cancer\nID: DOID_10534", "shape": "dot"}, {"id": "gene:DMBT1", "label": "DMBT1", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "DMBT1 (shares: GO:0031012)", "shape": "dot"}, {"id": "disease:DOID_9256", "label": "colorectal cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: colorectal cancer\nID: DOID_9256", "shape": "dot"}, {"id": "gene:CD151", "label": "CD151", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "CD151 (shares: GO:0005178)", "shape": "dot"}, {"id": "disease:DOID_1324", "label": "lung cancer", "color": {"background": "#e74c3c", "border": "#e74c3c", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 25, "font": {"size": 11, "color": "#2c3e50"}, "title": "Disease: lung cancer\nID: DOID_1324", "shape": "dot"}, {"id": "gene:JAML", "label": "JAML", "color": {"background": "#3498db", "border": "#3498db", "highlight": {"background": "#f1c40f", "border": "#f39c12"}}, "size": 18, "font": {"size": 10, "color": "#2c3e50"}, "title": "JAML (shares: GO:0005178)", "shape": "dot"}]);
        var edges = new vis.DataSet([{"from": "gene:SFRP2", "to": "disease:DOID_263", "color": {"color": "#e74c3c", "highlight": "#f1c40f"}, "title": "negative_marker (SPOKE-OKN)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "disease:DOID_1793", "color": {"color": "#3498db", "highlight": "#f1c40f"}, "title": "expressed_in (SPOKE-OKN)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "go:0051216", "color": {"color": "#f39c12", "highlight": "#f1c40f"}, "title": "go_pathway (Ubergraph)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "go:0051216", "to": "disease:MONDO_0020779", "color": {"color": "#f39c12", "highlight": "#f1c40f"}, "title": "go_pathway (Ubergraph)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:UTRN", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:UTRN", "to": "disease:DOID_263", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:ECM2", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:ECM2", "to": "disease:DOID_3571", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:WNT4", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:WNT4", "to": "disease:DOID_1793", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:S100A9", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:S100A9", "to": "disease:DOID_4362", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:COL22A1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:COL22A1", "to": "disease:DOID_2998", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:COL8A1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:COL8A1", "to": "disease:DOID_1781", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:IL1RL1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:IL1RL1", "to": "disease:DOID_1781", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:FLRT3", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:FLRT3", "to": "disease:DOID_263", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:RELN", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:RELN", "to": "disease:DOID_3571", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:ALPL", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:ALPL", "to": "disease:DOID_2998", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:COL23A1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:COL23A1", "to": "disease:DOID_1781", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:COL23A1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:COL23A1", "to": "disease:DOID_263", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:COL23A1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:COL23A1", "to": "disease:DOID_2998", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:GFOD2", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:GFOD2", "to": "disease:DOID_1793", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:GFOD2", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:GFOD2", "to": "disease:DOID_263", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:COL6A6", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:COL6A6", "to": "disease:DOID_2998", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:COL9A2", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:COL9A2", "to": "disease:DOID_10283", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:DMBT1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:DMBT1", "to": "disease:DOID_10534", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:DMBT1", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:DMBT1", "to": "disease:DOID_9256", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:CD151", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:CD151", "to": "disease:DOID_1781", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:SFRP2", "to": "gene:JAML", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}, {"from": "gene:JAML", "to": "disease:DOID_1324", "color": {"color": "#1abc9c", "highlight": "#f1c40f"}, "title": "shared_pathway (SPOKE+Wikidata)", "width": 2, "smooth": {"type": "continuous"}}]);

        var container = document.getElementById('network');
        var data = { nodes: nodes, edges: edges };

        var options = {
            nodes: {
                borderWidth: 2,
                shadow: true,
                font: {
                    color: '#ffffff',
                    face: 'arial',
                }
            },
            edges: {
                shadow: true,
                smooth: {
                    type: 'continuous'
                }
            },
            physics: {
                enabled: true,
                barnesHut: {
                    gravitationalConstant: -3000,
                    centralGravity: 0.3,
                    springLength: 150,
                    springConstant: 0.04,
                    damping: 0.09,
                },
                stabilization: {
                    iterations: 150,
                    fit: true
                }
            },
            interaction: {
                hover: true,
                tooltipDelay: 100,
                dragNodes: true,
                dragView: true,
                zoomView: true,
            }
        };

        var network = new vis.Network(container, data, options);

        var physicsEnabled = false;

        // Stop physics after initial stabilization
        network.on("stabilizationIterationsDone", function () {
            physicsEnabled = false;
            network.setOptions({ physics: { enabled: false } });
            updatePhysicsButton();
        });

        function togglePhysics() {
            physicsEnabled = !physicsEnabled;
            network.setOptions({ physics: { enabled: physicsEnabled } });
            updatePhysicsButton();
        }

        function updatePhysicsButton() {
            var btn = document.getElementById('physicsToggle');
            if (physicsEnabled) {
                btn.textContent = 'âš¡ Auto-Layout: ON';
                btn.className = 'toggle-btn active';
            } else {
                btn.textContent = 'âš¡ Auto-Layout: OFF';
                btn.className = 'toggle-btn inactive';
            }
        }

        function resetLayout() {
            // Re-enable physics and re-stabilize
            physicsEnabled = true;
            network.setOptions({ physics: { enabled: true } });
            updatePhysicsButton();

            // Reset node positions to trigger re-layout
            var positions = network.getPositions();
            var updates = [];
            for (var nodeId in positions) {
                updates.push({ id: nodeId, x: undefined, y: undefined });
            }
            nodes.update(updates);

            // Restabilize the network
            network.stabilize(150);
        }

        // Custom tooltip handling - replaces native vis.js tooltip
        var tooltip = document.getElementById('custom-tooltip');

        function showTooltip(content, params) {
            if (!content) return;
            tooltip.innerHTML = content;
            tooltip.style.display = 'block';

            // Get coordinates from vis.js params
            var x, y;
            if (params.event && params.event.srcEvent) {
                x = params.event.srcEvent.clientX;
                y = params.event.srcEvent.clientY;
            } else if (params.pointer && params.pointer.DOM) {
                // Fallback to DOM pointer coordinates + container offset
                var rect = container.getBoundingClientRect();
                x = rect.left + params.pointer.DOM.x;
                y = rect.top + params.pointer.DOM.y;
            } else {
                return; // Can't position tooltip
            }

            tooltip.style.left = (x + 15) + 'px';
            tooltip.style.top = (y + 15) + 'px';

            // Adjust if going off screen
            var rect = tooltip.getBoundingClientRect();
            if (rect.right > window.innerWidth) {
                tooltip.style.left = (x - rect.width - 15) + 'px';
            }
            if (rect.bottom > window.innerHeight) {
                tooltip.style.top = (y - rect.height - 15) + 'px';
            }
        }

        function hideTooltip() {
            tooltip.style.display = 'none';
        }

        // Handle edge hover
        network.on('hoverEdge', function(params) {
            var edgeId = params.edge;
            var edge = edges.get(edgeId);
            var content = edge ? (edge.customTitle || edge.title) : null;
            if (content) {
                showTooltip(content, params);
            }
        });

        network.on('blurEdge', function(params) {
            hideTooltip();
        });

        // Handle node hover
        network.on('hoverNode', function(params) {
            var nodeId = params.node;
            var node = nodes.get(nodeId);
            var content = node ? (node.customTitle || node.title) : null;
            if (content) {
                showTooltip(content, params);
            }
        });

        network.on('blurNode', function(params) {
            hideTooltip();
        });

        // Hide tooltip when dragging or clicking
        network.on('dragStart', function() {
            hideTooltip();
        });
        network.on('click', function() {
            hideTooltip();
        });
    </script>
</body>
</html>
    </div>
    
    <div class="answer-section">
        <h2>Answer</h2>
        <p>SFRP2 is connected to 11 diseases through 4 distinct mechanisms across 3 knowledge graphs (SPOKE+Wikidata, SPOKE-OKN, Ubergraph).</p><p>The connection types include: expressed_in, go_pathway, negative_marker, shared_pathway.</p>
    </div>
    
    <div class="provenance">
        <h3>Provenance &#9660;</h3>
        <div class="provenance-body">
            <dl>
            <dt>timestamp</dt><dd>2026-02-03T07:37:29.678835+00:00</dd>
            <dt>sources</dt><dd>SPOKE-OKN, Wikidata, Ubergraph</dd>
            <dt>endpoints</dt><dd>SPOKE-OKN: https://frink.apps.renci.org/spoke-okn/sparql<br>Wikidata: https://query.wikidata.org/sparql<br>Ubergraph: https://ubergraph.apps.renci.org/sparql</dd>
            <dt>gene_symbol</dt><dd>SFRP2</dd>
            </dl>
            <details class="query-block"><summary>SPOKE: Direct gene-disease associations<span class="query-endpoint">https://frink.apps.renci.org/spoke-okn/sparql</span></summary><pre><code>PREFIX biolink: &lt;https://w3id.org/biolink/vocab/&gt;
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
PREFIX spoke: &lt;https://purl.org/okn/frink/kg/spoke/schema/&gt;

SELECT ?gene ?predicate ?disease
WHERE {
    ?gene a biolink:Gene ;
          rdfs:label "SFRP2" .
    VALUES ?predicate {
        spoke:MARKER_POS_GmpD
        spoke:MARKER_NEG_GmnD
        spoke:EXPRESSEDIN_GeiD
    }
    ?gene ?predicate ?disease .
}</code></pre></details>
            <details class="query-block"><summary>Wikidata: Gene-disease associations<span class="query-endpoint">https://query.wikidata.org/sparql</span></summary><pre><code>PREFIX wdt: &lt;http://www.wikidata.org/prop/direct/&gt;
PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;

SELECT DISTINCT ?disease ?diseaseLabel ?doid ?mondo
WHERE {
    ?gene wdt:P353 "SFRP2" ;
          wdt:P703 wd:Q15978631 .
    ?gene wdt:P2293 ?disease .
    ?disease rdfs:label ?diseaseLabel .
    FILTER(LANG(?diseaseLabel) = "en")
    OPTIONAL { ?disease wdt:P699 ?doid . }
    OPTIONAL { ?disease wdt:P5270 ?mondo . }
}</code></pre></details>
            <details class="query-block"><summary>Wikidata: Gene GO terms (via protein)<span class="query-endpoint">https://query.wikidata.org/sparql</span></summary><pre><code>PREFIX wdt: &lt;http://www.wikidata.org/prop/direct/&gt;
PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;

SELECT DISTINCT ?goId ?goLabel
WHERE {
    ?gene wdt:P353 "SFRP2" ;
          wdt:P703 wd:Q15978631 ;
          wdt:P688 ?protein .
    ?protein wdt:P680|wdt:P681|wdt:P682 ?goTerm .
    ?goTerm wdt:P686 ?goId .
    ?goTerm rdfs:label ?goLabel .
    FILTER(LANG(?goLabel) = "en")
}</code></pre></details>
            <details class="query-block"><summary>Ubergraph: GO term to disease (per GO term)<span class="query-endpoint">https://ubergraph.apps.renci.org/sparql</span></summary><pre><code>PREFIX obo: &lt;http://purl.obolibrary.org/obo/&gt;
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
PREFIX owl: &lt;http://www.w3.org/2002/07/owl#&gt;

SELECT DISTINCT ?disease ?diseaseLabel
WHERE {
    BIND(obo:&lt;GO_ID&gt; AS ?goTerm)
    {
        ?disease rdfs:subClassOf* obo:MONDO_0000001 .
        ?disease rdfs:subClassOf ?restriction .
        ?restriction owl:onProperty ?prop ;
                     owl:someValuesFrom ?goTerm .
    }
    UNION
    {
        ?disease rdfs:subClassOf* obo:MONDO_0000001 .
        ?disease obo:RO_0004027 ?goTerm .
    }
    ?disease rdfs:label ?diseaseLabel .
}
LIMIT 20</code></pre></details>
        </div>
    </div>

    <script>
        document.querySelectorAll('.step-header').forEach(function(header) {
            header.addEventListener('click', function() {
                var body = this.nextElementSibling;
                var toggle = this.querySelector('.step-toggle');
                body.classList.toggle('collapsed');
                toggle.classList.toggle('collapsed');
            });
        });
        document.querySelectorAll('.provenance h3').forEach(function(h) {
            h.addEventListener('click', function() {
                this.nextElementSibling.classList.toggle('expanded');
            });
        });
    </script>
</body>
</html>